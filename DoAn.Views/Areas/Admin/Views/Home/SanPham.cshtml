
@{
    ViewBag.Title = "SanPham";
    Layout = "~/Areas/Admin/Views/Shared/_LayoutAdmin.cshtml";
}
<h2>Thông tin sản phẩm</h2>
<table class="table table-bordered">
    <thead>
        <tr>
            <th>STT</th>
            <th>Tên sản phẩm</th>
            <th>Giá</th>
            <th>Số lượng bán</th>
            <th>Ngày cập nhật</th>
        </tr>
    </thead>
    <tbody id="grdDemo"></tbody>
</table>
<ul id="pagination-demo" class="pagination-sm"></ul>

@section  script{
    <script>
        $(document).ready(function () {
            countData();
         });
         function Load(data) {
             if (data.length > 0) {
                 for (var i = 0; i < data.length; i++)
                     $("#grdDemo").append("<tr><td>" + (i + 1) + "</td><td>" +
                     data[i].TenSp + "</td><td>" +
                     data[i].Gia + "</td><td>" +
                     data[i].SoLuongBan + "</td><td>" +
                     data[i].NgayCapNhat + "</td></tr>");
             }
         }
         function countData() {
             var count = 0;
             $.ajax({
                 type: "GET",
                 url: urlRoot + "SanPhams/GetCount",
                 success: function (data) {
                     dem(data);
                 },
                 error: function (result) {
                     //alert("Error login"
                 }
             });
         }
         function dem(data) {
             $('#pagination-demo').twbsPagination({
                 totalPages: Math.ceil(data.length/10),
                 visiblePages: 7,
                 onPageClick: function (event, page) {
                     $("#grdDemo").html("");
                     $.ajax({
                         type: "GET",
                         url: urlRoot + "SanPhams/GetAll",
                         data: { pageNo: page },
                         contentType: 'text',
                         success: function (data) {
                             Load(data);
                             // console.log(data);
                         },
                         error: function (result) {
                             //alert("Error login"
                         }
                     });
                 }
             });
         }
    </script>
}

